<!DOCTYPE HTML>
<html>
  <head>
  
    <title>Engine Yard Docs: Migrating to the Engine Yard AppCloud</title>
    <meta name="description" content="Learn why Engine Yard\'s managed Rails hosting, Rails deployment &amp; 24/7/365 live service is the best">
    <meta name="keywords" content="Ruby on Rails Fully-Managed Hosting, Scaling, Scaled, Cluster Slices, Cloud Computing, On-Demand Deployment, Merb, Rubinius, Open-Source Software">
    <meta http-equiv="expires" content="0">

    <!--[if IE]>
	  <script src="/javascripts/html5shiv"></script>
    <![endif]-->
    
	<link rel="stylesheet" href="/css/application.css" type="text/css" charset="utf-8" />
    
    <!--[if IE]>
	  <link rel="stylesheet" href="/css/ie.css" type="text/css" charset="utf-8" />
    <![endif]-->
    
    <!--[if lte IE 7]>
	  <link rel="stylesheet" href="/css/ie7.css" type="text/css" charset="utf-8" />
    <![endif]-->

    <script src="http://use.typekit.com/cra4agv.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="wrapper">
          <h1 class="branding">
              <a href="http://engineyard.com/">Ruby On Rails Hosting Management: Engine Yard Platform-as-a-Service</a> <!-- CHANGE ON GO LIVE -->
          </h1>

          <ul class="utility">
            <li>866-518-YARD</li>
            <li>
              <form action="/search" method="get" class="search">
                <input type="text" name="q" id="searchbox" placeholder="search" />
                <input type="submit" value="Search" class="gsc-search-button" />
              </form>
            </li>
            <li>
			  <a href="https://login.engineyard.com/signup" class="login">Create Account</a>
            </li>
            <li>
			  <a href="https://cloud.engineyard.com" class="login">Sign In</a>
            </li>
          </ul>

          <nav> <!-- CHANGE ON GO LIVE -->
		  <ul class="navigation">
		    <li>
		      <a href="http://engineyard.com/products/appcloud"><span>Cloud Products</span></a>
		      <ul>
		        <li>
		          <a href="http://engineyard.com/products/appcloud">Engine Yard AppCloud</a>
		          <ul>
		            <li><a href="http://engineyard.com/products/appcloud/features">Features</a></li>
		            <li><a href="http://engineyard.com/products/appcloud/pricing">Pricing</a></li>
		            <li><a href="http://engineyard.com/video/17825326">Video Tour</a></li>
		          </ul>
		        </li>
		        <li>
		          <a href="http://engineyard.com/products/xcloud">Engine Yard xCloud</a>
		          <ul>
		            <li><a href="http://engineyard.com/products/xcloud/features">Features</a></li>
		            <li><a href="http://engineyard.com/products/xcloud/pricing">Pricing</a></li>
		          </ul>
		        </li>
		        <li>
		          <a href="http://engineyard.com/products/technology">Engine Yard Platform</a>
		          <ul>
		            <li><a href="http://engineyard.com/products/technology/stack">Technology Stack</a></li>
		          </ul>
		        </li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/support-plans"><span>Support</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/support-plans">Support Plans</a></li>
		        <li><a href="http://engineyard.com/services">Professional Services</a></li>
		      </ul>
		    </li>

		    <li>
			  <a href="http://engineyard.com/university"><span>EY University</span></a>	
		    </li>

		    <li>
		      <a href="http://engineyard.com/videos"><span>Resources</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/videos">Videos</a></li>
		        <li><a href="http://engineyard.com/podcasts">Podcasts</a></li>
		        <li><a href="http://engineyard.com/developer/events">Events</a></li>
		        <li><a href="http://engineyard.com/partners">Development Partners</a></li>
		        <li><a href="http://engineyard.com/developer/groups">User Groups</a></li> 
		        <li><a href="http://jobs.engineyard.com">Jobs Board</a></li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/open-source"><span>Open Source</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/open-source">Projects</a></li>
		        <li><a href="http://engineyard.com/open-source/people">Contributors</a></li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/company/"><span>About</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/company/">Overview</a></li>
		        <li><a href="http://engineyard.com/company/customers">Customers</a></li>
		        <li><a href="http://engineyard.com/company/team">Leadership Team</a></li>
		        <li><a href="http://engineyard.com/company/partners">Technology Partners</a></li>
		        <li><a href="http://engineyard.com/company/careers">Careers</a></li>
		        <li><a href="http://engineyard.com/company/news">News &amp; Press</a></li>
		        <li><a href="http://engineyard.com/company/contact">Contact Us</a></li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/blog"><span>Blog</span></a>
		    </li>
		  </ul>
		</nav>
        </div>
      </header>

      <div id="content">
        <div class="wrapper">
			<h1>Migrating to the Engine Yard AppCloud</h1>

<p>This guide will help you migrate your application from your current environment to the Engine Yard AppCloud. While many applications will run without any changes, some applications may require some configuration changes or customizations to take advantage of the Engine Yard AppCloud service.</p>

<p>To ensure you have as quick and smooth a migration as possible, it is important to plan each step of the process - and to test.</p>

<h2>Prerequisites</h2>

<ul><li>Lower the TTL on your DNS to 5.</li>
<li>Create an initial migration plan.  Use our <a class="internal present" href="/migration-steps-template.html">migration template</a> as a starting point, which you can then adjust.</li>
<li>Review our <a class="internal present" href="/faq_home.html">FAQs</a> to learn what is supported in the Engine Yard AppCloud.</li>
</ul><h2>Prepare Your Application</h2>

<ul><li><a class="internal absent" href="/deployment_home.html">Deploy your app</a>

<ul><li>Load a dump of your current DB so you have some data to test against. Read our <a class="internal present" href="/dump-and-load-your-mysql-database.html">How To</a> for instructions.</li>
<li>Setup any <a class="internal present" href="/custom-chef-recipes.html">customizations</a> you might need.</li>
</ul></li>
<li>Test your setup for functionality. Some common areas to look for:

<ul><li>Ensure all areas of your application are functional.</li>
<li>Make sure you can deliver email, if needed.</li>
<li>Assets are being served properly.</li>
<li>Check that your app can properly connect to the database.</li>
</ul></li>
</ul><h2>Finalize Your Migration</h2>

<pre><code>* Iterate through your migration plan skipping any steps that will affect your current production environment.
* Update or add any steps as needed.
* Continue to iterate until you can run through the migration without any issues.
* Schedule the final cut-over and communicate the maintenance to your users. 
</code></pre>

<h2>Special Requirements</h2>

<p>Some applications have special considerations when migrating such as very large databases or very large traffic volumes. If you feel that your application falls into either of these categories please read on.</p>

<h3>Large Data Sets</h3>

<p>If you have a large database, say over 2 GB, then you may not want to wait while you dump, compress, move, uncompress, and load your database. If this is the case we suggest that you contact our <a href="http://www.engineyard.com/support">support organization</a> for an assisted data move.  Through our <a href="http://www.engineyard.com/support/services">Professional Services Program</a> we can setup a replication stream from your current DB to your cloud DB.</p>

<p>During the final cut-over one of our DBAs will be able to work with you to promote the new cloud DB to a master DB, ensuring that replication is completely caught up. This can take the move from a few hours to a few minutes.</p>

<h3>Heavy Traffic Applications</h3>

<p>If you have a heavy traffic pattern it's very important to make sure you properly <a class="internal present" href="/appcloud-instances.html">size your new environment</a> before migrating your users to your new environment. To give you peace of mind you can setup a load test. Using <a href="http://www.igvita.com/2009/04/20/ruby-proxies-for-scale-and-monitoring">em-proxy</a> you can setup a load test with live traffic. Coupling this with <a href="http://rpm.newrelic.com">New Relic</a> will allow you to review your cloud performance during your heaviest traffic times and make any needed adjustments.</p>

<p>Read more on how to <a class="internal present" href="/em-proxy.html">load test with real production traffic</a>.</p>

<h2>The Final Cutover</h2>

<p>When it's time for the final cutover you should have a nice migration guide that was fleshed out by walking through the steps above. You'll want to make sure you start the migration inside of a maintenance window that has been set with your end users. Here are some things to be aware of during the final cutover.</p>

<ul><li>In your current hosting environment put up your maintenance page and stop your application prior dumping the database. You want to be absolutely sure that your users are not still writing to the old database after you start the dump.</li>
<li>Make sure you shut off any crons and/or background processes that modify data. This includes letting any queued processes finish running (if you are using something like <a href="http://github.com/defunkt/resque">resque</a>).</li>
<li>Lowering your TTL for your DNS a few days prior to the cutover will result in quick DNS updates.</li>
<li>Updating your DNS entries to point to cloud is the point of no return. Once you do this you'll be taking live traffic on your new cloud environment. As such it is especially important that you do one final test against your cloud setup before you update DNS.</li>
</ul>
		</div>
	</div>

      <div class="clear"></div> 

      <div id="footer">
        <div id="footer-content">
          <div class="page">
            <div class="grid_4">
              <p id="copyright">
                <p>   
                Running on Engine Yard: <a href="http://engineyard.com/products/appcloud">The Ruby Cloud</a> and <a href="http://github.com/github/gollum">Gollum</a><br /> <!-- CHANGE WHEN GO LIVE -->
                Ruby is the Language of the Cloud.<br />
                Copyright &copy; Engine Yard, Inc. All rights reserved.
              </p>
            </div>
            <div class="grid_2">
              <h2>Ruby Products</h2><!--CHANGE WHEN GO LIVE -->
              <ul>
                <li><a href="http://engineyard.com/products/appcloud">Engine Yard AppCloud</a></li>
                <li><a href="http://engineyard.com/products/xcloud">Engine Yard xCloud</a></li>
                <li><a href="http://engineyard.com/university/scheduled_classes">Rails 3 Training</a></li>
                <li><a href="http://engineyard.com/services">Professional Services</a></li>
              </ul>
            </div>
            <div class="grid_2">
              <h2>Customer Service</h2>  
              <ul>                       
                <li><a href="http://support.cloud.engineyard.com/">Request Support</a></li> 
                <li><a href="http://docs.engineyard.com">Documentation</a></li> 
                <li><a href="http://community.engineyard.com">Community Forums</a></li> 
                <li><a href="/products/support-policies">Support Policies</a></li>
                <li><a href="/legal/privacy">Privacy Policy</a></li>
              </ul>
            </div>
            <div class="grid_2">
              <h2>Ruby Community</h2>
              <ul>
                <li><a href="http://www.jruby.org">JRuby</a></li>
                <li><a href="http://rubini.us">Rubinius</a></li>
                <li><a href="http://www.railsinstaller.com">Rails Installer</a></li>
                <li><a href="http://jobs.engineyard.com">Ruby Jobs</a></li>
                <li><a href="http://www.railsdevelopment.com">Rails Developers</a></li>
              </ul>
            </div>
            <div class="grid_2">
              <h2>Socialize With Us</h2>
              <ul>
                <li>
					<a href="http://engineyard.com/blog" class="blog">Blog</a> <!--CHANGE WHEN LIVE-->
                </li>
                <li>
					<a href="http://twitter.com/engineyard" class="twitter trackLink">Twitter</a>
                </li>
                <li>                                                                             
					<a href="http://facebook.com/engineyard" class="facebook trackLink">Facebook</a>
                </li>
                <li>                                                                             
					<a href="http://www.linkedin.com/groups?gid=111752" class="linkedin trackLink">LinkedIn</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>           
    </div>

    <div class="hidden">
	  <script src="/javascripts/application.min.js"></script>
    </div>
  </body>
</html>