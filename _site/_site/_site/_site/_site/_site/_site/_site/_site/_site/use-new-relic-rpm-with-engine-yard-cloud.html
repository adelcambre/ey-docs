<h1>How to Use New Relic RPM with Engine Yard AppCloud</h1>

<p><strong>NOTE: Engine Yard AppCloud customers can now use <a href="http://www.newrelic.com/press-release-20110118.html">Bronze RPM for Free</a>!</strong></p>

<p>In order to use the New Relic RPM agent with Engine Yard AppCloud you'll need to follow these steps.</p>

<p>We also have <a href="setup-performance-monitoring-with-new-relic-rpm">a screencast</a> to guide you through these steps.</p>

<p>NOTE: The screencast is currently a bit behind in the UI, but the doc below is up-to-date.</p>

<h2>Choose a Plan</h2>

<ul><li>In the top menu, click on <strong>Account</strong>.</li>
</ul><p>{{:appcloud:howtos:services:services-1.jpg?700|}}</p>

<ul><li>Under the Services section then click on the <strong>New Relic</strong> logo.</li>
<li>On this page there are links for <a href="http://www.newrelic.com/features.html">RPM's capabilities</a> based on the <a href="http://www.newrelic.com/get-RPM.html">subscription level</a>.</li>
</ul><p>{{:appcloud:howtos:services:choose_a_plan.jpg?700|}}</p>

<ul><li>Once you've read and agreed to the New Relic Terms of Service, click the <strong>check box</strong> and click the <strong>Choose</strong> button to activate the plan right for you.</li>
</ul><p>Your New Relic account is created automatically and you are billed all in one place: your Engine Yard AppCloud account.</p>

<h2>Configure your Application</h2>

<p>There are two parts to configuring your application.</p>

<ul><li>You need to install a gem and add a configuration line to your <code>environment.rb</code> file.</li>
<li>You also need to make a change in the Engine Yard AppCloud UI to let us know you've got everything setup.</li>
</ul><h3>Install the Gem</h3>

<ul><li>Click on the <strong>Dashboard</strong> link.</li>
<li>Then click on the <strong>Applications</strong> tab for the environment you will monitor with New Relic.</li>
<li>Click on the <strong>red ruby icon</strong> to edit your gems.</li>
<li>Search for the <code>newrelic_rpm</code> gem, then add it to your <strong>Selected Gems</strong>.</li>
</ul><h3>Add the Gem to your <code>environment.rb</code> File</h3>

<p>For Rails versions 2.1 and above, edit <code>environment.rb</code> and add to the initializer block:</p>

<p>  config.gem "newrelic_rpm"</p>

<p>For Rails versions 2.0.*, edit <code>environment.rb</code> and add this statement after the initializer block:</p>

<p>  require "newrelic_rpm"</p>

<p>If you're running a rails app older than 2.0 you'll need to use the plugin and <a href="http://support.newrelic.com/faqs/docs/ruby-agent-installation">follow New Relic's guide</a>.</p>

<p>If you are using bundler you can just add the <code>newrelic_rpm</code> gem to your Gemfile and it should work fine. It will work with Rails 3.x and Rails 2.3.x.</p>

<h3>Enable your Application</h3>

<ul><li>Under <em>Server Tools</em> on the left, click on the <strong>Application</strong> link.</li>
<li>The pencil is your <strong>edit</strong>  link to change your application's settings.</li>
<li>At the bottom of this page, check the box to <strong>Enable New Relic Monitoring</strong>.</li>
</ul><h2>Deploy your Application</h2>

<p>In order for New Relic to begin gathering data you need to deploy your application.</p>

<h2>View New Relic Information</h2>

<ul><li>Click on your <strong>Account</strong>, then the <strong>New Relic</strong> logo.</li>
<li>On the page there is a link that says: <strong>Click here to login and view your performance data.</strong>  It will take you to the New Relic site to review your information.</li>
</ul>