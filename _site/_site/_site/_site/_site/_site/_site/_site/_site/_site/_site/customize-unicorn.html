<h1>Customize Unicorn</h1>

<p>Unicorn does not employ <strong>keep files</strong> for it's configuration and monitrc files.  Because of this we wanted to enable an way to customize unicorn without using keepfiles.</p>

<p>As we were re-writing the Control Scripts for passenger we desired a simple way to set things in the <em>environment</em>.</p>

<p>Updating <code>env.custom</code> we can do the following and more:</p>

<ul><li>Unicorn Configuration File.</li>
<li>Starting Unicorn with bundle exec versus running the system unicorn.</li>
</ul><h2>env.custom</h2>

<p>If your application is named myapp you would update the following file:</p>

<pre><code>/data/myapp/shared/config/env.custom
</code></pre>

<h3>Alternate Configuration File</h3>

<p>If you need to specify an alternate configuration file you could do the following in the <code>env.custom</code> file:</p>

<p><code>
UNICORN_CONF="/data/myapp/shared/config/custom_unicorn.rb"
</code></p>

<p>Then copy <code>/data/myapp/shared/config/unicorn.rb</code> to <code>/data/myapp/shared/config/custom_unicorn.rb</code> and customize it as you see fit.</p>

<p>To restart unicorn run:</p>

<p><code>
/engineyard/bin/app_myapp reload
</code></p>

<h3>Unicorn in Bundler</h3>

<p>First in order to run Unicorn under bundler you must add unicorn to the Gemfile and re-deploy.  Update <code>env.custom</code> with the following:</p>

<p><code>
RUBY="/usr/bin/bundle"
UNICORN_EXEC="exec unicorn"
</code></p>

<p>Then restart unicorn like below:</p>

<p><code>
/engineyard/bin/app_myapp reload
</code></p>

<p>Provided Unicorn restarted properly your unicorn should now be running under bundler.  If it does not please check out the unicorn log files in:</p>

<pre><code>/data/myapp/shared/log
</code></pre>