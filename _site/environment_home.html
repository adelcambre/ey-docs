<!DOCTYPE HTML>
<html>
  <head>
  
    <title>Engine Yard Docs: Environments</title>
    <meta name="description" content="Learn why Engine Yard\'s managed Rails hosting, Rails deployment &amp; 24/7/365 live service is the best">
    <meta name="keywords" content="Ruby on Rails Fully-Managed Hosting, Scaling, Scaled, Cluster Slices, Cloud Computing, On-Demand Deployment, Merb, Rubinius, Open-Source Software">
    <meta http-equiv="expires" content="0">

    <!--[if IE]>
	  <script src="/javascripts/html5shiv"></script>
    <![endif]-->
    
	<link rel="stylesheet" href="/css/application.css" type="text/css" charset="utf-8" />
    
    <!--[if IE]>
	  <link rel="stylesheet" href="/css/ie.css" type="text/css" charset="utf-8" />
    <![endif]-->
    
    <!--[if lte IE 7]>
	  <link rel="stylesheet" href="/css/ie7.css" type="text/css" charset="utf-8" />
    <![endif]-->

    <script src="http://use.typekit.com/cra4agv.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="wrapper">
          <h1 class="branding">
              <a href="http://engineyard.com/">Ruby On Rails Hosting Management: Engine Yard Platform-as-a-Service</a> <!-- CHANGE ON GO LIVE -->
          </h1>

          <ul class="utility">
            <li>866-518-YARD</li>
            <li>
              <form action="/search" method="get" class="search">
                <input type="text" name="q" id="searchbox" placeholder="search" />
                <input type="submit" value="Search" class="gsc-search-button" />
              </form>
            </li>
            <li>
			  <a href="https://login.engineyard.com/signup" class="login">Create Account</a>
            </li>
            <li>
			  <a href="https://cloud.engineyard.com" class="login">Sign In</a>
            </li>
          </ul>

          <nav> <!-- CHANGE ON GO LIVE -->
		  <ul class="navigation">
		    <li>
		      <a href="http://engineyard.com/products/appcloud"><span>Cloud Products</span></a>
		      <ul>
		        <li>
		          <a href="http://engineyard.com/products/appcloud">Engine Yard AppCloud</a>
		          <ul>
		            <li><a href="http://engineyard.com/products/appcloud/features">Features</a></li>
		            <li><a href="http://engineyard.com/products/appcloud/pricing">Pricing</a></li>
		            <li><a href="http://engineyard.com/video/17825326">Video Tour</a></li>
		          </ul>
		        </li>
		        <li>
		          <a href="http://engineyard.com/products/xcloud">Engine Yard xCloud</a>
		          <ul>
		            <li><a href="http://engineyard.com/products/xcloud/features">Features</a></li>
		            <li><a href="http://engineyard.com/products/xcloud/pricing">Pricing</a></li>
		          </ul>
		        </li>
		        <li>
		          <a href="http://engineyard.com/products/technology">Engine Yard Platform</a>
		          <ul>
		            <li><a href="http://engineyard.com/products/technology/stack">Technology Stack</a></li>
		          </ul>
		        </li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/support-plans"><span>Support</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/support-plans">Support Plans</a></li>
		        <li><a href="http://engineyard.com/services">Professional Services</a></li>
		      </ul>
		    </li>

		    <li>
			  <a href="http://engineyard.com/university"><span>EY University</span></a>	
		    </li>

		    <li>
		      <a href="http://engineyard.com/videos"><span>Resources</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/videos">Videos</a></li>
		        <li><a href="http://engineyard.com/podcasts">Podcasts</a></li>
		        <li><a href="http://engineyard.com/developer/events">Events</a></li>
		        <li><a href="http://engineyard.com/partners">Development Partners</a></li>
		        <li><a href="http://engineyard.com/developer/groups">User Groups</a></li> 
		        <li><a href="http://jobs.engineyard.com">Jobs Board</a></li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/open-source"><span>Open Source</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/open-source">Projects</a></li>
		        <li><a href="http://engineyard.com/open-source/people">Contributors</a></li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/company/"><span>About</span></a>
		      <ul>
		        <li><a href="http://engineyard.com/company/">Overview</a></li>
		        <li><a href="http://engineyard.com/company/customers">Customers</a></li>
		        <li><a href="http://engineyard.com/company/team">Leadership Team</a></li>
		        <li><a href="http://engineyard.com/company/partners">Technology Partners</a></li>
		        <li><a href="http://engineyard.com/company/careers">Careers</a></li>
		        <li><a href="http://engineyard.com/company/news">News &amp; Press</a></li>
		        <li><a href="http://engineyard.com/company/contact">Contact Us</a></li>
		      </ul>
		    </li>

		    <li>
		      <a href="http://engineyard.com/blog"><span>Blog</span></a>
		    </li>
		  </ul>
		</nav>
        </div>
      </header>

      <div id="content">
        <div class="wrapper">
			<h1>Environments</h1>

<p><strong>Environment</strong> is an overloaded term. Here at EY when we refer to your 'environment' we are talking about the cluster of instances that collectively run an application or set of applications. An environment includes Application Instance(s), Database Instance(s), and possibly
one or more Utility Instances. Check out this article if you want to know more about the various instances types: <a class="internal present" href="/appcloud-instances.html">AppCloud Instances</a>.</p>

<p>We'll automatically associate an <a class="internal present" href="/ip-addresses.html">IP Address</a> to your environment for you. You'll be able to point your domain name to this address.</p>

<p>At the 'environment' level you'll be able to manage the following:</p>

<ul><li><a class="internal present" href="/ip-addresses.html">IP Addresses</a></li>
<li><a class="internal present" href="/env_ssh_keys.html">SSH Keys</a></li>
<li><a class="internal present" href="/adding-cron-jobs.html">Adding Cron Jobs</a></li>
<li><a class="internal present" href="/change-an-instance-size.html">Instance Sizes</a></li>
<li><a class="internal present" href="/usage-graphs.html">Resource Usage Graphs</a></li>
<li><a class="internal present" href="/using-snapshots.html">Using Snapshots</a></li>
<li><a class="internal present" href="/rebuilding-an-environment.html">Rebuilding an Environment</a></li>
</ul><h2>Create an Environment</h2>

<p><strong>NOTE</strong>: In order to use this article you must have first setup at least one environment with the Quick Start method.</p>

<h3>Create an Environment</h3>

<ul><li>Click on the <strong>Dashboard</strong> section under SERVER TOOLS.</li>
<li>In the top right corner, click on the <strong>Create New Environment</strong> link.</li>
<li>Enter your data, make your selections, and press the <strong>Create environment</strong> button.</li>
</ul><h3>Environment Options</h3>

<ul><li>When creating your "Environment Name", use underscores to separate words instead of spaces.  Common environment names are: myapp_production, myapp_staging, myapp_testing, myapp_qa, myapp_ci, etc.</li>
<li>The "SSH Username" is used to create a user on the system.  Your application runs under this user.  Also, this user has sudo rights.</li>
</ul><p><strong>NOTE</strong>: Your user account name cannot be root.</p>

<ul><li>Usually leaving the default "Availability Zone" selected is fine.</li>
<li>Choose your preferred "Web Server Stack".</li>
<li>The default 10 backups is recommended for the "Number of database backups to keep".  You may alter this to your taste.</li>
<li>If you need more frequent database backups, change the "How often to run database backups in hours" value.</li>
</ul><h2>Delete an Environment</h2>

<h3>Before You Begin</h3>

<ul><li>The Environment you want to delete can't have any instances running.</li>
</ul><h3>Delete the Environment</h3>

<ul><li>Under SERVER TOOLS, click on "Dashboard" to see a list of all environments.</li>
<li>To permanently delete the Environment, click on the <strong>Delete</strong> button in the top right corner.</li>
<li>You will be prompted to verify that you wish to do so, click "OK".</li>
</ul><p>That environment is now gone.</p>

<h2>Start Your Environment</h2>

<p>If you have no instances running, these steps will help you get going.</p>

<ul><li>Get to the Dashboard.  Under SERVER TOOLS click on the Dashboard section.</li>
<li>From your list of environments, click on the <strong>Create New Instance(s)</strong> link.</li>
</ul><p>Follow the on screen prompts to choose from either a Single Small Server, Basic Cluster or Custom.  The compute cost will be calculated and displayed for you in the top right.</p>

<h3>Start an Instance in a Running Environment</h3>

<p>You can grow your cluster by adding additional application or database instances as needed.</p>

<p>From the Dashboard again, this time click on <strong>Add New Instance to Cluster</strong> link.</p>

<p>You can choose from three options:</p>

<ul><li>Add Application Server</li>
<li>Add Database Server</li>
<li>Add Utility Server</li>
</ul><p>Click the <strong>Add to Instances</strong> button to add the type of instance to your cluster.</p>

<h2>Clone an Environment</h2>

<p>AppCloud makes it easy to clone your environment.  This can be useful so that you can do a test deploy, make sure everything will run correctly, before deploying to production.</p>

<p>Because when you clone an environment, it clones <strong>everything</strong>, including the volumes your original environment uses.</p>

<h3>Steps</h3>

<ul><li>From the Dashboard, click on the <strong>Clone</strong> link for the environment you'd like to clone.</li>
<li>The <em>Clone your production environment</em> page appears.  Setup the <strong>Name</strong>, <strong>Framework Environment</strong>, <strong>IP Address</strong>, and <strong>Domain Name(s)</strong> for each application.  Click <strong>Clone Environment</strong> button.</li>
<li>Once your cloned environment is booted, you'll see it in your Dashboard as ready.</li>
</ul><p>Now you're ready to do your tests and when your done you can terminate the experimental cloned environment.</p>

<p>Gone are the costs of having to maintain a staging environment and the time it takes to make it match production!</p>

<h2>Cluster Architechture</h2>

<p><img src="images/cluster_architechture.png" alt="Cluster Architecture" /></p>

<h2>View Your HAProxy Stats</h2>

<p>In order to gain a better picture of the current availability of your application, we generate a password so you can securely review your HAProxy stats for your application cluster.</p>

<p><strong>NOTE:</strong> You must be running at least two application instances to view HAProxy stats.</p>

<p>Your password is generated for each environment you've got running.</p>

<h3>How to Display HAProxy Stats</h3>

<ul><li>Click on the <strong>More Options</strong> tab of the environment</li>
<li>You will see a link to <strong>HAProxy Stats</strong> listed here (unless you are not running multiple app instances in this environment)</li>
</ul><p>Upon clicking the link, you'll be greeted with a page full of information recorded by HAProxy on the current connections.</p>

<p><img src="images/haproxy_stats.jpg" alt="HAProxy Stats" /></p>

<p>Just refresh the page to get the latest stats.</p>

<h3>Further Reading</h3>

<p>Go to <a href="http://haproxy.1wt.eu/#docs">HAProxy's documentation</a> for more information how to interpret the stats.</p>
		</div>
	</div>

      <div class="clear"></div> 

      <div id="footer">
        <div id="footer-content">
          <div class="page">
            <div class="grid_4">
              <p id="copyright">
                <p>   
                Running on Engine Yard: <a href="http://engineyard.com/products/appcloud">The Ruby Cloud</a> and <a href="http://github.com/github/gollum">Gollum</a><br /> <!-- CHANGE WHEN GO LIVE -->
                Ruby is the Language of the Cloud.<br />
                Copyright &copy; Engine Yard, Inc. All rights reserved.
              </p>
            </div>
            <div class="grid_2">
              <h2>Ruby Products</h2><!--CHANGE WHEN GO LIVE -->
              <ul>
                <li><a href="http://engineyard.com/products/appcloud">Engine Yard AppCloud</a></li>
                <li><a href="http://engineyard.com/products/xcloud">Engine Yard xCloud</a></li>
                <li><a href="http://engineyard.com/university/scheduled_classes">Rails 3 Training</a></li>
                <li><a href="http://engineyard.com/services">Professional Services</a></li>
              </ul>
            </div>
            <div class="grid_2">
              <h2>Customer Service</h2>  
              <ul>                       
                <li><a href="http://support.cloud.engineyard.com/">Request Support</a></li> 
                <li><a href="http://docs.engineyard.com">Documentation</a></li> 
                <li><a href="http://community.engineyard.com">Community Forums</a></li> 
                <li><a href="/products/support-policies">Support Policies</a></li>
                <li><a href="/legal/privacy">Privacy Policy</a></li>
              </ul>
            </div>
            <div class="grid_2">
              <h2>Ruby Community</h2>
              <ul>
                <li><a href="http://www.jruby.org">JRuby</a></li>
                <li><a href="http://rubini.us">Rubinius</a></li>
                <li><a href="http://www.railsinstaller.com">Rails Installer</a></li>
                <li><a href="http://jobs.engineyard.com">Ruby Jobs</a></li>
                <li><a href="http://www.railsdevelopment.com">Rails Developers</a></li>
              </ul>
            </div>
            <div class="grid_2">
              <h2>Socialize With Us</h2>
              <ul>
                <li>
					<a href="http://engineyard.com/blog" class="blog">Blog</a> <!--CHANGE WHEN LIVE-->
                </li>
                <li>
					<a href="http://twitter.com/engineyard" class="twitter trackLink">Twitter</a>
                </li>
                <li>                                                                             
					<a href="http://facebook.com/engineyard" class="facebook trackLink">Facebook</a>
                </li>
                <li>                                                                             
					<a href="http://www.linkedin.com/groups?gid=111752" class="linkedin trackLink">LinkedIn</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>           
    </div>

    <div class="hidden">
	  <script src="/javascripts/application.min.js"></script>
    </div>
  </body>
</html>